commit-msg:
  commands:
    commitlint:
      run: |
        msg=$(cat {1})
        pattern='^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\(.+\))?: .+'
        if ! echo "$msg" | grep -qE "$pattern"; then
          echo "‚ùå Commit message does not follow Conventional Commits format."
          echo "   Expected: <type>(<scope>): <subject>"
          echo "   Types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert"
          echo "   Got: $msg"
          exit 1
        fi

pre-commit:
  commands:
    ruff:
      run: uv run ruff check src tests
    ruff-format:
      run: uv run ruff format --check src tests
    pytest:
      run: uv run pytest tests -v
