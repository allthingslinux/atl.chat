# ATL Bridge â€” Configuration template (envsubst)
# Generated by prepare-config.sh. Secrets from env (DISCORD_TOKEN, PORTAL_*, etc.).

# Channel mappings: Discord channel ID <-> IRC server/channel <-> XMPP MUC JID
# Replace discord_channel_id with your Discord channel ID to enable bridging
mappings:
  - discord_channel_id: "REPLACE_WITH_DISCORD_CHANNEL_ID"
    irc:
      server: "${IRC_BRIDGE_SERVER}"
      port: ${IRC_TLS_PORT}
      tls: true
      channel: "#bridge"
    xmpp:
      muc_jid: "bridge@muc.${PROSODY_DOMAIN}"

# Toggles
announce_joins_and_quits: true
announce_extras: false

# Timeouts and limits
identity_cache_ttl_seconds: 3600
avatar_cache_ttl_seconds: 86400
irc_puppet_idle_timeout_hours: 24

irc_puppet_postfix: ""

# IRC flood control and rejoin
irc_throttle_limit: 10
irc_message_queue: 30
irc_rejoin_delay: 5
irc_auto_rejoin: true

# IRC TLS: set false for dev with self-signed certs (env: BRIDGE_IRC_TLS_VERIFY or ATL_ENVIRONMENT=dev)
irc_tls_verify: ${IRC_TLS_VERIFY}

# IRC SASL (optional)
irc_use_sasl: false
irc_sasl_user: ""
irc_sasl_password: ""
